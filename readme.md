# SmsBridge

SmsBridge 是一款 Android 应用程序，可作为短信网关，将短信验证码转发到各种服务。对于需要将验证码从手机转发到其他设备或服务的开发者、测试人员和用户来说，它非常有用。

## 主要功能

- **短信转发**: 通过电子邮件、HTTP 请求转发短信验证码。
- **日志记录**: 详细记录收到的每条验证码，包括发件人、短信内容、解析结果、转发方式和状态。
- **日志管理**: 日志查看、清理。
- **灵活配置**: 通过设置界面轻松配置不同转发方式的参数。

## 运行流程

```mermaid
graph TD
    A[接收到新短信] --> B{是否启用监听?};
    B -->|是| C{发件人号码匹配?};
    B -->|否| End1[忽略];
    C -->|是| D[使用正则表达式解析验证码];
    C -->|否| End2[忽略];
    D --> E{是否成功解析?};
    E -->|是| F{是否启用加密?};
    E -->|否| G[记录解析失败日志];
    F -->|是| H[加密验证码];
    F -->|否| I[使用原始验证码];
    H --> J;
    I --> J{选择转发方式};
    J -->|Email| K[通过 SMTP 发送邮件];
    J -->|Webhook| L[发送 HTTP 请求];
    K --> M{转发是否成功?};
    L --> M;
    M -->|是| N[记录成功日志];
    M -->|否| O[记录失败日志];
```

## 小米手机（MIUI）使用配置说明

为了确保 SmsBridge 在小米手机上能够稳定地在后台运行并接收短信，您需要进行以下手动配置。MIUI 的省电和权限管理策略非常严格，可能会阻止应用在后台正常工作。

**请按照以下步骤操作：**

1.  **修改省电策略**:
    *   打开 **设置** -> **应用设置** -> **应用管理**。
    *   找到 **SmsBridge** 并点击进入应用信息页面。
    *   点击 **省电策略**。
    *   选择 **无限制**。
    *   这将防止系统在后台为了省电而终止应用。

3.  **允许通知类短信权限**
    *   在 **SmsBridge** 的应用信息页面中，进入 **权限管理**-> **其他权限**-> **通知类短信**。
    *   找到并允许 **始终允许** 权限。
    *   小米手机默认无法读取通知类的短信，需开启通知类短信权限。


完成以上步骤后，SmsBridge 应该就能在您的小米设备上稳定运行了。如果仍然遇到问题，请检查应用的通知权限是否已开启，以确保您能收到应用的状态通知。

## 应用截图
![83bd66f8105d6e2aa6662fd79439db87](https://github.com/user-attachments/assets/b3c9daef-a8be-4ae6-bce4-8d5f0c87823c)
![6cd2a4b66c756b56e1b422121f04acde](https://github.com/user-attachments/assets/8960c87a-8a7a-44bf-8977-cd61e297d76c)
![446ed7940997b25c7a710719edca3f90](https://github.com/user-attachments/assets/1cb44b55-4928-435b-a2dd-b24b659a6806)

